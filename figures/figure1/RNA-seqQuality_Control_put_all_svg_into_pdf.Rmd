---
title: "Single-nucleus RNA-seq: Quality control"
output: pdf_document
papersize: a4
---

```{r echo=FALSE, fig.height=11, fig.width=8, message=FALSE, warning=FALSE, include=T, results="asis"}
library(rsvg)
library(ggplot2)
merge_svg_to_pdf <- function(folder_path, output_path) {
  # List all SVG files in the folder
  svg_files <- list.files(path = folder_path, pattern = "\\.svg$", full.names = TRUE)
  
  # Check if any SVG files are found
  if (length(svg_files) == 0) {
    stop("No SVG files found in the folder.")
  }
  
  # Initialize a new PDF surface
  # Loop through each SVG file and render it to the PDF surface
  for (svg_file in svg_files) {
    if (grepl("_log_seurat_QC.svg$", svg_file)) {
      updated_string <- sub("_log_seurat_QC$", "", tools::file_path_sans_ext(basename(svg_file)))
      cat("\n")
      cat(paste("# ",updated_string,"\n",sep = ""))
      cat("\n")
    # Render the SVG file to the current PDF page
    plot(magick::image_read_svg(svg_file, width = 3000, height = 3000))
    }
    cat("\n")
  }
  
  # Print the output path
}

# Provide the path to the folder containing SVG files
folder_path <- "/Users/zhenzuo/Desktop/after_qc_seurat_object/"

# Call the function to merge SVG files into a PDF
merge_svg_to_pdf(folder_path, output_path)
```
